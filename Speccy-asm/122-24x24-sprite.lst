SCREEN_ADR	EQU 4000
ENTRY_POINT	EQU 8000
		ORG 8000
8000:		label start
8000:060F	LD B, 0F
8002:0E03	LD C, 03
8004:CD1680	CALL 8016
8007:CD2580	CALL 8025
800A:061D	LD B, 1D
800C:0E15	LD C, 15
800E:CD1680	CALL 8016
8011:CD2580	CALL 8025
8014:		label finish
8014:18FE	JR 8014
8016:		label calc_sprite_address
8016:79		LD A, C
8017:E607	AND 07
8019:0F		RRCA
801A:0F		RRCA
801B:0F		RRCA
801C:B0		OR B
801D:5F		LD E, A
801E:79		LD A, C
801F:E618	AND 18
8021:F640	OR 40
8023:57		LD D, A
8024:C9		RET
Defining MACRO add_e
Params: n
8025:		label draw_sprite
8025:215180	LD HL, 8051
8028:D5		PUSH DE
8029:CD3E80	CALL 803E
802C:D1		POP DE
Expanding MACRO add_e
n= 0020 
LD A , E 
802D:7B		LD A, E
ADD A , n 
802E:C620	ADD A, 20
LD E , A 
8030:5F		LD E, A
ENDM 
		ENDM
End of MACRO add_e
8031:D5		PUSH DE
8032:CD3E80	CALL 803E
8035:D1		POP DE
Expanding MACRO add_e
n= 0020 
LD A , E 
8036:7B		LD A, E
ADD A , n 
8037:C620	ADD A, 20
LD E , A 
8039:5F		LD E, A
ENDM 
		ENDM
End of MACRO add_e
803A:CD3E80	CALL 803E
803D:C9		RET
803E:		label draw_8_lines
803E:0608	LD B, 08
8040:		label loop
8040:7E		LD A, (HL)
8041:12		LD (DE), A
8042:23		INC HL
8043:1C		INC E
8044:7E		LD A, (HL)
8045:12		LD (DE), A
8046:23		INC HL
8047:1C		INC E
8048:7E		LD A, (HL)
8049:12		LD (DE), A
804A:23		INC HL
804B:14		INC D
804C:1D		DEC E
804D:1D		DEC E
804E:10F0	DJNZ 8040
8050:C9		RET
8051:		label SPRITE_ADR
		INCBIN sprite.bin
809A:		END 8000
Emiting TAP basic loader
Emiting TAP from 8000 to 8099

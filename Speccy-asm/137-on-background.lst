SCREEN_ADR	EQU 4000
BITMAP_SIZE	EQU 1800
ATTRIBUTE_BLOCK_SIZE EQU 0800
SCREEN_SIZE	EQU 1800
ENTRY_POINT	EQU 8000
		ORG 8000
Defining MACRO draw_shifted_sprite
Params: index
Defining MACRO shift_sprite
Params: index
8000:		label start
8000:210282	LD HL, 8202
8003:110040	LD DE, 4000
8006:010018	LD BC, 1800
8009:EDB0	LDIR
Expanding MACRO shift_sprite
index= 0000 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
800B:21A281	LD HL, 81A2
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
800E:110282	LD DE, 8202
LD B , 0018 
8011:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8013:		local label block
LD A , [ HL ] 
8013:7E		LD A, (HL)
SRL A 
8014:CB3F	SRL A
LD [ DE ] , A 
8016:12		LD (DE), A
INC HL 
8017:23		INC HL
INC DE 
8018:13		INC DE
REPT 0003 
		REPT 3
8019:7E		LD A, (HL)
801A:1F		RRA
801B:12		LD (DE), A
801C:23		INC HL
801D:13		INC DE
801E:7E		LD A, (HL)
801F:1F		RRA
8020:12		LD (DE), A
8021:23		INC HL
8022:13		INC DE
8023:7E		LD A, (HL)
8024:1F		RRA
8025:12		LD (DE), A
8026:23		INC HL
8027:13		INC DE
		ENDM
DJNZ block 
8028:10E9	DJNZ 8013
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0001 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
802A:210282	LD HL, 8202
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
802D:116282	LD DE, 8262
LD B , 0018 
8030:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8032:		local label block
LD A , [ HL ] 
8032:7E		LD A, (HL)
SRL A 
8033:CB3F	SRL A
LD [ DE ] , A 
8035:12		LD (DE), A
INC HL 
8036:23		INC HL
INC DE 
8037:13		INC DE
REPT 0003 
		REPT 3
8038:7E		LD A, (HL)
8039:1F		RRA
803A:12		LD (DE), A
803B:23		INC HL
803C:13		INC DE
803D:7E		LD A, (HL)
803E:1F		RRA
803F:12		LD (DE), A
8040:23		INC HL
8041:13		INC DE
8042:7E		LD A, (HL)
8043:1F		RRA
8044:12		LD (DE), A
8045:23		INC HL
8046:13		INC DE
		ENDM
DJNZ block 
8047:10E9	DJNZ 8032
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0002 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
8049:216282	LD HL, 8262
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
804C:11C282	LD DE, 82C2
LD B , 0018 
804F:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8051:		local label block
LD A , [ HL ] 
8051:7E		LD A, (HL)
SRL A 
8052:CB3F	SRL A
LD [ DE ] , A 
8054:12		LD (DE), A
INC HL 
8055:23		INC HL
INC DE 
8056:13		INC DE
REPT 0003 
		REPT 3
8057:7E		LD A, (HL)
8058:1F		RRA
8059:12		LD (DE), A
805A:23		INC HL
805B:13		INC DE
805C:7E		LD A, (HL)
805D:1F		RRA
805E:12		LD (DE), A
805F:23		INC HL
8060:13		INC DE
8061:7E		LD A, (HL)
8062:1F		RRA
8063:12		LD (DE), A
8064:23		INC HL
8065:13		INC DE
		ENDM
DJNZ block 
8066:10E9	DJNZ 8051
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0003 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
8068:21C282	LD HL, 82C2
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
806B:112283	LD DE, 8322
LD B , 0018 
806E:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8070:		local label block
LD A , [ HL ] 
8070:7E		LD A, (HL)
SRL A 
8071:CB3F	SRL A
LD [ DE ] , A 
8073:12		LD (DE), A
INC HL 
8074:23		INC HL
INC DE 
8075:13		INC DE
REPT 0003 
		REPT 3
8076:7E		LD A, (HL)
8077:1F		RRA
8078:12		LD (DE), A
8079:23		INC HL
807A:13		INC DE
807B:7E		LD A, (HL)
807C:1F		RRA
807D:12		LD (DE), A
807E:23		INC HL
807F:13		INC DE
8080:7E		LD A, (HL)
8081:1F		RRA
8082:12		LD (DE), A
8083:23		INC HL
8084:13		INC DE
		ENDM
DJNZ block 
8085:10E9	DJNZ 8070
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0004 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
8087:212283	LD HL, 8322
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
808A:118283	LD DE, 8382
LD B , 0018 
808D:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
808F:		local label block
LD A , [ HL ] 
808F:7E		LD A, (HL)
SRL A 
8090:CB3F	SRL A
LD [ DE ] , A 
8092:12		LD (DE), A
INC HL 
8093:23		INC HL
INC DE 
8094:13		INC DE
REPT 0003 
		REPT 3
8095:7E		LD A, (HL)
8096:1F		RRA
8097:12		LD (DE), A
8098:23		INC HL
8099:13		INC DE
809A:7E		LD A, (HL)
809B:1F		RRA
809C:12		LD (DE), A
809D:23		INC HL
809E:13		INC DE
809F:7E		LD A, (HL)
80A0:1F		RRA
80A1:12		LD (DE), A
80A2:23		INC HL
80A3:13		INC DE
		ENDM
DJNZ block 
80A4:10E9	DJNZ 808F
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0005 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
80A6:218283	LD HL, 8382
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80A9:11E283	LD DE, 83E2
LD B , 0018 
80AC:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
80AE:		local label block
LD A , [ HL ] 
80AE:7E		LD A, (HL)
SRL A 
80AF:CB3F	SRL A
LD [ DE ] , A 
80B1:12		LD (DE), A
INC HL 
80B2:23		INC HL
INC DE 
80B3:13		INC DE
REPT 0003 
		REPT 3
80B4:7E		LD A, (HL)
80B5:1F		RRA
80B6:12		LD (DE), A
80B7:23		INC HL
80B8:13		INC DE
80B9:7E		LD A, (HL)
80BA:1F		RRA
80BB:12		LD (DE), A
80BC:23		INC HL
80BD:13		INC DE
80BE:7E		LD A, (HL)
80BF:1F		RRA
80C0:12		LD (DE), A
80C1:23		INC HL
80C2:13		INC DE
		ENDM
DJNZ block 
80C3:10E9	DJNZ 80AE
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0006 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
80C5:21E283	LD HL, 83E2
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80C8:114284	LD DE, 8442
LD B , 0018 
80CB:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
80CD:		local label block
LD A , [ HL ] 
80CD:7E		LD A, (HL)
SRL A 
80CE:CB3F	SRL A
LD [ DE ] , A 
80D0:12		LD (DE), A
INC HL 
80D1:23		INC HL
INC DE 
80D2:13		INC DE
REPT 0003 
		REPT 3
80D3:7E		LD A, (HL)
80D4:1F		RRA
80D5:12		LD (DE), A
80D6:23		INC HL
80D7:13		INC DE
80D8:7E		LD A, (HL)
80D9:1F		RRA
80DA:12		LD (DE), A
80DB:23		INC HL
80DC:13		INC DE
80DD:7E		LD A, (HL)
80DE:1F		RRA
80DF:12		LD (DE), A
80E0:23		INC HL
80E1:13		INC DE
		ENDM
DJNZ block 
80E2:10E9	DJNZ 80CD
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0007 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
80E4:214284	LD HL, 8442
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80E7:11A284	LD DE, 84A2
LD B , 0018 
80EA:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
80EC:		local label block
LD A , [ HL ] 
80EC:7E		LD A, (HL)
SRL A 
80ED:CB3F	SRL A
LD [ DE ] , A 
80EF:12		LD (DE), A
INC HL 
80F0:23		INC HL
INC DE 
80F1:13		INC DE
REPT 0003 
		REPT 3
80F2:7E		LD A, (HL)
80F3:1F		RRA
80F4:12		LD (DE), A
80F5:23		INC HL
80F6:13		INC DE
80F7:7E		LD A, (HL)
80F8:1F		RRA
80F9:12		LD (DE), A
80FA:23		INC HL
80FB:13		INC DE
80FC:7E		LD A, (HL)
80FD:1F		RRA
80FE:12		LD (DE), A
80FF:23		INC HL
8100:13		INC DE
		ENDM
DJNZ block 
8101:10E9	DJNZ 80EC
ENDM 
		ENDM
End of MACRO shift_sprite
8103:0612	LD B, 12
8105:0E00	LD C, 00
8107:CD6D81	CALL 816D
Expanding MACRO draw_shifted_sprite
index= 0000 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
810A:210282	LD HL, 8202
CALL draw_sprite 
810D:CD7C81	CALL 817C
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8110:0612	LD B, 12
8112:0E03	LD C, 03
8114:CD6D81	CALL 816D
Expanding MACRO draw_shifted_sprite
index= 0001 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8117:216282	LD HL, 8262
CALL draw_sprite 
811A:CD7C81	CALL 817C
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
811D:0612	LD B, 12
811F:0E06	LD C, 06
8121:CD6D81	CALL 816D
Expanding MACRO draw_shifted_sprite
index= 0002 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8124:21C282	LD HL, 82C2
CALL draw_sprite 
8127:CD7C81	CALL 817C
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
812A:0612	LD B, 12
812C:0E09	LD C, 09
812E:CD6D81	CALL 816D
Expanding MACRO draw_shifted_sprite
index= 0003 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8131:212283	LD HL, 8322
CALL draw_sprite 
8134:CD7C81	CALL 817C
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8137:0612	LD B, 12
8139:0E0C	LD C, 0C
813B:CD6D81	CALL 816D
Expanding MACRO draw_shifted_sprite
index= 0004 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
813E:218283	LD HL, 8382
CALL draw_sprite 
8141:CD7C81	CALL 817C
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8144:0612	LD B, 12
8146:0E0F	LD C, 0F
8148:CD6D81	CALL 816D
Expanding MACRO draw_shifted_sprite
index= 0005 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
814B:21E283	LD HL, 83E2
CALL draw_sprite 
814E:CD7C81	CALL 817C
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8151:0612	LD B, 12
8153:0E12	LD C, 12
8155:CD6D81	CALL 816D
Expanding MACRO draw_shifted_sprite
index= 0006 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8158:214284	LD HL, 8442
CALL draw_sprite 
815B:CD7C81	CALL 817C
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
815E:0612	LD B, 12
8160:0E15	LD C, 15
8162:CD6D81	CALL 816D
Expanding MACRO draw_shifted_sprite
index= 0007 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8165:21A284	LD HL, 84A2
CALL draw_sprite 
8168:CD7C81	CALL 817C
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
816B:		label finish
816B:18FE	JR 816B
816D:		label calc_sprite_address
816D:79		LD A, C
816E:E607	AND 07
8170:0F		RRCA
8171:0F		RRCA
8172:0F		RRCA
8173:B0		OR B
8174:5F		LD E, A
8175:79		LD A, C
8176:E618	AND 18
8178:F640	OR 40
817A:57		LD D, A
817B:C9		RET
Defining MACRO add_e
Params: n
817C:		label draw_sprite
817C:CD8681	CALL 8186
817F:CD8681	CALL 8186
8182:CD8681	CALL 8186
8185:C9		RET
8186:		label draw_8_lines
8186:011808	LD BC, 0818
8189:		label loop
8189:EDA0	LDI
818B:EDA0	LDI
818D:EDA0	LDI
818F:7E		LD A, (HL)
8190:12		LD (DE), A
8191:23		INC HL
8192:1D		DEC E
8193:1D		DEC E
8194:1D		DEC E
8195:14		INC D
8196:10F1	DJNZ 8189
8198:7B		LD A, E
8199:C620	ADD A, 20
819B:5F		LD E, A
819C:D8		RET C
819D:7A		LD A, D
819E:D608	SUB 08
81A0:57		LD D, A
81A1:C9		RET
81A2:		label SPRITE_ADR
81A2:00000000	DEFB of 4 bytes
81A6:00000000	DEFB of 4 bytes
81AA:01F01000	DEFB of 4 bytes
81AE:03381000	DEFB of 4 bytes
81B2:05D71000	DEFB of 4 bytes
81B6:05CC1000	DEFB of 4 bytes
81BA:05301000	DEFB of 4 bytes
81BE:04C81000	DEFB of 4 bytes
81C2:07361000	DEFB of 4 bytes
81C6:0CFE3800	DEFB of 4 bytes
81CA:1FF80000	DEFB of 4 bytes
81CE:00003000	DEFB of 4 bytes
81D2:03FFB000	DEFB of 4 bytes
81D6:05FEE000	DEFB of 4 bytes
81DA:0EFDC000	DEFB of 4 bytes
81DE:18FC0000	DEFB of 4 bytes
81E2:18000000	DEFB of 4 bytes
81E6:01F80000	DEFB of 4 bytes
81EA:03FC0000	DEFB of 4 bytes
81EE:01B00000	DEFB of 4 bytes
81F2:020C0000	DEFB of 4 bytes
81F6:070E0000	DEFB of 4 bytes
81FA:1E078000	DEFB of 4 bytes
81FE:00000000	DEFB of 4 bytes
8202:		label SPRITE_SHIFT_0
8202:		label LOADING_SCREN
		INCBIN Alien8.scr
9D02:		END 8000
Emiting TAP basic loader
Emiting TAP from 8000 to 9D01

SCREEN_ADR	EQU 4000
ENTRY_POINT	EQU 8000
		ORG 8000
Defining MACRO draw_shifted_sprite
Params: index
Defining MACRO shift_sprite
Params: index
8000:		label start
Expanding MACRO shift_sprite
index= 0000 
LD HL , SPRITE_ADR 
8000:213781	LD HL, 8137
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8003:117F81	LD DE, 817F
LD B , 0018 
8006:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8008:		local label block
LDI 
8008:EDA0	LDI
LDI 
800A:EDA0	LDI
LDI 
800C:EDA0	LDI
XOR A 
800E:AF		XOR A
LD ( DE ) , A 
800F:12		LD (DE), A
INC DE 
8010:13		INC DE
DJNZ block 
8011:10F5	DJNZ 8008
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0001 
LD HL , SPRITE_ADR 
8013:213781	LD HL, 8137
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8016:11DF81	LD DE, 81DF
LD B , 0018 
8019:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
801B:		local label block
LDI 
801B:EDA0	LDI
LDI 
801D:EDA0	LDI
LDI 
801F:EDA0	LDI
XOR A 
8021:AF		XOR A
LD ( DE ) , A 
8022:12		LD (DE), A
INC DE 
8023:13		INC DE
DJNZ block 
8024:10F5	DJNZ 801B
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0002 
LD HL , SPRITE_ADR 
8026:213781	LD HL, 8137
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8029:113F82	LD DE, 823F
LD B , 0018 
802C:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
802E:		local label block
LDI 
802E:EDA0	LDI
LDI 
8030:EDA0	LDI
LDI 
8032:EDA0	LDI
XOR A 
8034:AF		XOR A
LD ( DE ) , A 
8035:12		LD (DE), A
INC DE 
8036:13		INC DE
DJNZ block 
8037:10F5	DJNZ 802E
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0003 
LD HL , SPRITE_ADR 
8039:213781	LD HL, 8137
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
803C:119F82	LD DE, 829F
LD B , 0018 
803F:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8041:		local label block
LDI 
8041:EDA0	LDI
LDI 
8043:EDA0	LDI
LDI 
8045:EDA0	LDI
XOR A 
8047:AF		XOR A
LD ( DE ) , A 
8048:12		LD (DE), A
INC DE 
8049:13		INC DE
DJNZ block 
804A:10F5	DJNZ 8041
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0004 
LD HL , SPRITE_ADR 
804C:213781	LD HL, 8137
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
804F:11FF82	LD DE, 82FF
LD B , 0018 
8052:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8054:		local label block
LDI 
8054:EDA0	LDI
LDI 
8056:EDA0	LDI
LDI 
8058:EDA0	LDI
XOR A 
805A:AF		XOR A
LD ( DE ) , A 
805B:12		LD (DE), A
INC DE 
805C:13		INC DE
DJNZ block 
805D:10F5	DJNZ 8054
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0005 
LD HL , SPRITE_ADR 
805F:213781	LD HL, 8137
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8062:115F83	LD DE, 835F
LD B , 0018 
8065:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8067:		local label block
LDI 
8067:EDA0	LDI
LDI 
8069:EDA0	LDI
LDI 
806B:EDA0	LDI
XOR A 
806D:AF		XOR A
LD ( DE ) , A 
806E:12		LD (DE), A
INC DE 
806F:13		INC DE
DJNZ block 
8070:10F5	DJNZ 8067
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0006 
LD HL , SPRITE_ADR 
8072:213781	LD HL, 8137
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8075:11BF83	LD DE, 83BF
LD B , 0018 
8078:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
807A:		local label block
LDI 
807A:EDA0	LDI
LDI 
807C:EDA0	LDI
LDI 
807E:EDA0	LDI
XOR A 
8080:AF		XOR A
LD ( DE ) , A 
8081:12		LD (DE), A
INC DE 
8082:13		INC DE
DJNZ block 
8083:10F5	DJNZ 807A
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0007 
LD HL , SPRITE_ADR 
8085:213781	LD HL, 8137
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8088:111F84	LD DE, 841F
LD B , 0018 
808B:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
808D:		local label block
LDI 
808D:EDA0	LDI
LDI 
808F:EDA0	LDI
LDI 
8091:EDA0	LDI
XOR A 
8093:AF		XOR A
LD ( DE ) , A 
8094:12		LD (DE), A
INC DE 
8095:13		INC DE
DJNZ block 
8096:10F5	DJNZ 808D
ENDM 
		ENDM
End of MACRO shift_sprite
8098:0600	LD B, 00
809A:0E00	LD C, 00
809C:CD0281	CALL 8102
Expanding MACRO draw_shifted_sprite
index= 0000 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
809F:217F81	LD HL, 817F
CALL draw_sprite 
80A2:CD1181	CALL 8111
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
80A5:0600	LD B, 00
80A7:0E03	LD C, 03
80A9:CD0281	CALL 8102
Expanding MACRO draw_shifted_sprite
index= 0001 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80AC:21DF81	LD HL, 81DF
CALL draw_sprite 
80AF:CD1181	CALL 8111
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
80B2:0600	LD B, 00
80B4:0E06	LD C, 06
80B6:CD0281	CALL 8102
Expanding MACRO draw_shifted_sprite
index= 0002 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80B9:213F82	LD HL, 823F
CALL draw_sprite 
80BC:CD1181	CALL 8111
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
80BF:0600	LD B, 00
80C1:0E09	LD C, 09
80C3:CD0281	CALL 8102
Expanding MACRO draw_shifted_sprite
index= 0003 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80C6:219F82	LD HL, 829F
CALL draw_sprite 
80C9:CD1181	CALL 8111
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
80CC:0600	LD B, 00
80CE:0E0C	LD C, 0C
80D0:CD0281	CALL 8102
Expanding MACRO draw_shifted_sprite
index= 0004 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80D3:21FF82	LD HL, 82FF
CALL draw_sprite 
80D6:CD1181	CALL 8111
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
80D9:0600	LD B, 00
80DB:0E0F	LD C, 0F
80DD:CD0281	CALL 8102
Expanding MACRO draw_shifted_sprite
index= 0005 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80E0:215F83	LD HL, 835F
CALL draw_sprite 
80E3:CD1181	CALL 8111
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
80E6:0600	LD B, 00
80E8:0E12	LD C, 12
80EA:CD0281	CALL 8102
Expanding MACRO draw_shifted_sprite
index= 0006 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80ED:21BF83	LD HL, 83BF
CALL draw_sprite 
80F0:CD1181	CALL 8111
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
80F3:0600	LD B, 00
80F5:0E15	LD C, 15
80F7:CD0281	CALL 8102
Expanding MACRO draw_shifted_sprite
index= 0007 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80FA:211F84	LD HL, 841F
CALL draw_sprite 
80FD:CD1181	CALL 8111
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8100:		label finish
8100:18FE	JR 8100
8102:		label calc_sprite_address
8102:79		LD A, C
8103:E607	AND 07
8105:0F		RRCA
8106:0F		RRCA
8107:0F		RRCA
8108:B0		OR B
8109:5F		LD E, A
810A:79		LD A, C
810B:E618	AND 18
810D:F640	OR 40
810F:57		LD D, A
8110:C9		RET
Defining MACRO add_e
Params: n
8111:		label draw_sprite
8111:CD1B81	CALL 811B
8114:CD1B81	CALL 811B
8117:CD1B81	CALL 811B
811A:C9		RET
811B:		label draw_8_lines
811B:011808	LD BC, 0818
811E:		label loop
811E:EDA0	LDI
8120:EDA0	LDI
8122:EDA0	LDI
8124:7E		LD A, (HL)
8125:12		LD (DE), A
8126:23		INC HL
8127:1D		DEC E
8128:1D		DEC E
8129:1D		DEC E
812A:14		INC D
812B:10F1	DJNZ 811E
812D:7B		LD A, E
812E:C620	ADD A, 20
8130:5F		LD E, A
8131:D8		RET C
8132:7A		LD A, D
8133:D608	SUB 08
8135:57		LD D, A
8136:C9		RET
8137:		label SPRITE_ADR
8137:000000	DEFB of 3 bytes
813A:000000	DEFB of 3 bytes
813D:01F010	DEFB of 3 bytes
8140:033810	DEFB of 3 bytes
8143:05D710	DEFB of 3 bytes
8146:05CC10	DEFB of 3 bytes
8149:053010	DEFB of 3 bytes
814C:04C810	DEFB of 3 bytes
814F:073610	DEFB of 3 bytes
8152:0CFE38	DEFB of 3 bytes
8155:1FF800	DEFB of 3 bytes
8158:000030	DEFB of 3 bytes
815B:03FFB0	DEFB of 3 bytes
815E:05FEE0	DEFB of 3 bytes
8161:0EFDC0	DEFB of 3 bytes
8164:18FC00	DEFB of 3 bytes
8167:180000	DEFB of 3 bytes
816A:01F800	DEFB of 3 bytes
816D:03FC00	DEFB of 3 bytes
8170:01B000	DEFB of 3 bytes
8173:020C00	DEFB of 3 bytes
8176:070E00	DEFB of 3 bytes
8179:1E0780	DEFB of 3 bytes
817C:000000	DEFB of 3 bytes
817F:		label SPRITE_SHIFT_0
817F:		END 8000
Emiting TAP basic loader
Emiting TAP from 8000 to 817E

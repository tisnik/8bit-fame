SCREEN_ADR	EQU 4000
ENTRY_POINT	EQU 8000
		ORG 8000
Defining MACRO draw_shifted_sprite
Params: index
Defining MACRO shift_sprite
Params: index
8000:		label start
Expanding MACRO shift_sprite
index= 0000 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
8000:219781	LD HL, 8197
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8003:11F781	LD DE, 81F7
LD B , 0018 
8006:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8008:		local label block
LD A , [ HL ] 
8008:7E		LD A, (HL)
SRL A 
8009:CB3F	SRL A
LD [ DE ] , A 
800B:12		LD (DE), A
INC HL 
800C:23		INC HL
INC DE 
800D:13		INC DE
LD A , [ HL ] 
800E:7E		LD A, (HL)
RRA 
800F:1F		RRA
LD [ DE ] , A 
8010:12		LD (DE), A
INC HL 
8011:23		INC HL
INC DE 
8012:13		INC DE
LD A , [ HL ] 
8013:7E		LD A, (HL)
RRA 
8014:1F		RRA
LD [ DE ] , A 
8015:12		LD (DE), A
INC HL 
8016:23		INC HL
INC DE 
8017:13		INC DE
LD A , [ HL ] 
8018:7E		LD A, (HL)
RRA 
8019:1F		RRA
LD [ DE ] , A 
801A:12		LD (DE), A
INC HL 
801B:23		INC HL
INC DE 
801C:13		INC DE
DJNZ block 
801D:10E9	DJNZ 8008
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0001 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
801F:21F781	LD HL, 81F7
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8022:115782	LD DE, 8257
LD B , 0018 
8025:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8027:		local label block
LD A , [ HL ] 
8027:7E		LD A, (HL)
SRL A 
8028:CB3F	SRL A
LD [ DE ] , A 
802A:12		LD (DE), A
INC HL 
802B:23		INC HL
INC DE 
802C:13		INC DE
LD A , [ HL ] 
802D:7E		LD A, (HL)
RRA 
802E:1F		RRA
LD [ DE ] , A 
802F:12		LD (DE), A
INC HL 
8030:23		INC HL
INC DE 
8031:13		INC DE
LD A , [ HL ] 
8032:7E		LD A, (HL)
RRA 
8033:1F		RRA
LD [ DE ] , A 
8034:12		LD (DE), A
INC HL 
8035:23		INC HL
INC DE 
8036:13		INC DE
LD A , [ HL ] 
8037:7E		LD A, (HL)
RRA 
8038:1F		RRA
LD [ DE ] , A 
8039:12		LD (DE), A
INC HL 
803A:23		INC HL
INC DE 
803B:13		INC DE
DJNZ block 
803C:10E9	DJNZ 8027
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0002 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
803E:215782	LD HL, 8257
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8041:11B782	LD DE, 82B7
LD B , 0018 
8044:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8046:		local label block
LD A , [ HL ] 
8046:7E		LD A, (HL)
SRL A 
8047:CB3F	SRL A
LD [ DE ] , A 
8049:12		LD (DE), A
INC HL 
804A:23		INC HL
INC DE 
804B:13		INC DE
LD A , [ HL ] 
804C:7E		LD A, (HL)
RRA 
804D:1F		RRA
LD [ DE ] , A 
804E:12		LD (DE), A
INC HL 
804F:23		INC HL
INC DE 
8050:13		INC DE
LD A , [ HL ] 
8051:7E		LD A, (HL)
RRA 
8052:1F		RRA
LD [ DE ] , A 
8053:12		LD (DE), A
INC HL 
8054:23		INC HL
INC DE 
8055:13		INC DE
LD A , [ HL ] 
8056:7E		LD A, (HL)
RRA 
8057:1F		RRA
LD [ DE ] , A 
8058:12		LD (DE), A
INC HL 
8059:23		INC HL
INC DE 
805A:13		INC DE
DJNZ block 
805B:10E9	DJNZ 8046
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0003 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
805D:21B782	LD HL, 82B7
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8060:111783	LD DE, 8317
LD B , 0018 
8063:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8065:		local label block
LD A , [ HL ] 
8065:7E		LD A, (HL)
SRL A 
8066:CB3F	SRL A
LD [ DE ] , A 
8068:12		LD (DE), A
INC HL 
8069:23		INC HL
INC DE 
806A:13		INC DE
LD A , [ HL ] 
806B:7E		LD A, (HL)
RRA 
806C:1F		RRA
LD [ DE ] , A 
806D:12		LD (DE), A
INC HL 
806E:23		INC HL
INC DE 
806F:13		INC DE
LD A , [ HL ] 
8070:7E		LD A, (HL)
RRA 
8071:1F		RRA
LD [ DE ] , A 
8072:12		LD (DE), A
INC HL 
8073:23		INC HL
INC DE 
8074:13		INC DE
LD A , [ HL ] 
8075:7E		LD A, (HL)
RRA 
8076:1F		RRA
LD [ DE ] , A 
8077:12		LD (DE), A
INC HL 
8078:23		INC HL
INC DE 
8079:13		INC DE
DJNZ block 
807A:10E9	DJNZ 8065
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0004 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
807C:211783	LD HL, 8317
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
807F:117783	LD DE, 8377
LD B , 0018 
8082:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
8084:		local label block
LD A , [ HL ] 
8084:7E		LD A, (HL)
SRL A 
8085:CB3F	SRL A
LD [ DE ] , A 
8087:12		LD (DE), A
INC HL 
8088:23		INC HL
INC DE 
8089:13		INC DE
LD A , [ HL ] 
808A:7E		LD A, (HL)
RRA 
808B:1F		RRA
LD [ DE ] , A 
808C:12		LD (DE), A
INC HL 
808D:23		INC HL
INC DE 
808E:13		INC DE
LD A , [ HL ] 
808F:7E		LD A, (HL)
RRA 
8090:1F		RRA
LD [ DE ] , A 
8091:12		LD (DE), A
INC HL 
8092:23		INC HL
INC DE 
8093:13		INC DE
LD A , [ HL ] 
8094:7E		LD A, (HL)
RRA 
8095:1F		RRA
LD [ DE ] , A 
8096:12		LD (DE), A
INC HL 
8097:23		INC HL
INC DE 
8098:13		INC DE
DJNZ block 
8099:10E9	DJNZ 8084
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0005 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
809B:217783	LD HL, 8377
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
809E:11D783	LD DE, 83D7
LD B , 0018 
80A1:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
80A3:		local label block
LD A , [ HL ] 
80A3:7E		LD A, (HL)
SRL A 
80A4:CB3F	SRL A
LD [ DE ] , A 
80A6:12		LD (DE), A
INC HL 
80A7:23		INC HL
INC DE 
80A8:13		INC DE
LD A , [ HL ] 
80A9:7E		LD A, (HL)
RRA 
80AA:1F		RRA
LD [ DE ] , A 
80AB:12		LD (DE), A
INC HL 
80AC:23		INC HL
INC DE 
80AD:13		INC DE
LD A , [ HL ] 
80AE:7E		LD A, (HL)
RRA 
80AF:1F		RRA
LD [ DE ] , A 
80B0:12		LD (DE), A
INC HL 
80B1:23		INC HL
INC DE 
80B2:13		INC DE
LD A , [ HL ] 
80B3:7E		LD A, (HL)
RRA 
80B4:1F		RRA
LD [ DE ] , A 
80B5:12		LD (DE), A
INC HL 
80B6:23		INC HL
INC DE 
80B7:13		INC DE
DJNZ block 
80B8:10E9	DJNZ 80A3
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0006 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
80BA:21D783	LD HL, 83D7
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80BD:113784	LD DE, 8437
LD B , 0018 
80C0:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
80C2:		local label block
LD A , [ HL ] 
80C2:7E		LD A, (HL)
SRL A 
80C3:CB3F	SRL A
LD [ DE ] , A 
80C5:12		LD (DE), A
INC HL 
80C6:23		INC HL
INC DE 
80C7:13		INC DE
LD A , [ HL ] 
80C8:7E		LD A, (HL)
RRA 
80C9:1F		RRA
LD [ DE ] , A 
80CA:12		LD (DE), A
INC HL 
80CB:23		INC HL
INC DE 
80CC:13		INC DE
LD A , [ HL ] 
80CD:7E		LD A, (HL)
RRA 
80CE:1F		RRA
LD [ DE ] , A 
80CF:12		LD (DE), A
INC HL 
80D0:23		INC HL
INC DE 
80D1:13		INC DE
LD A , [ HL ] 
80D2:7E		LD A, (HL)
RRA 
80D3:1F		RRA
LD [ DE ] , A 
80D4:12		LD (DE), A
INC HL 
80D5:23		INC HL
INC DE 
80D6:13		INC DE
DJNZ block 
80D7:10E9	DJNZ 80C2
ENDM 
		ENDM
End of MACRO shift_sprite
Expanding MACRO shift_sprite
index= 0007 
LD HL , SPRITE_ADR + ( index * 0018 * 0004 ) 
80D9:213784	LD HL, 8437
LD DE , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80DC:119784	LD DE, 8497
LD B , 0018 
80DF:0618	LD B, 18
LOCAL block 
		LOCAL block
block : 
80E1:		local label block
LD A , [ HL ] 
80E1:7E		LD A, (HL)
SRL A 
80E2:CB3F	SRL A
LD [ DE ] , A 
80E4:12		LD (DE), A
INC HL 
80E5:23		INC HL
INC DE 
80E6:13		INC DE
LD A , [ HL ] 
80E7:7E		LD A, (HL)
RRA 
80E8:1F		RRA
LD [ DE ] , A 
80E9:12		LD (DE), A
INC HL 
80EA:23		INC HL
INC DE 
80EB:13		INC DE
LD A , [ HL ] 
80EC:7E		LD A, (HL)
RRA 
80ED:1F		RRA
LD [ DE ] , A 
80EE:12		LD (DE), A
INC HL 
80EF:23		INC HL
INC DE 
80F0:13		INC DE
LD A , [ HL ] 
80F1:7E		LD A, (HL)
RRA 
80F2:1F		RRA
LD [ DE ] , A 
80F3:12		LD (DE), A
INC HL 
80F4:23		INC HL
INC DE 
80F5:13		INC DE
DJNZ block 
80F6:10E9	DJNZ 80E1
ENDM 
		ENDM
End of MACRO shift_sprite
80F8:0600	LD B, 00
80FA:0E00	LD C, 00
80FC:CD6281	CALL 8162
Expanding MACRO draw_shifted_sprite
index= 0000 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
80FF:21F781	LD HL, 81F7
CALL draw_sprite 
8102:CD7181	CALL 8171
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8105:0600	LD B, 00
8107:0E03	LD C, 03
8109:CD6281	CALL 8162
Expanding MACRO draw_shifted_sprite
index= 0001 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
810C:215782	LD HL, 8257
CALL draw_sprite 
810F:CD7181	CALL 8171
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8112:0600	LD B, 00
8114:0E06	LD C, 06
8116:CD6281	CALL 8162
Expanding MACRO draw_shifted_sprite
index= 0002 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8119:21B782	LD HL, 82B7
CALL draw_sprite 
811C:CD7181	CALL 8171
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
811F:0600	LD B, 00
8121:0E09	LD C, 09
8123:CD6281	CALL 8162
Expanding MACRO draw_shifted_sprite
index= 0003 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8126:211783	LD HL, 8317
CALL draw_sprite 
8129:CD7181	CALL 8171
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
812C:0600	LD B, 00
812E:0E0C	LD C, 0C
8130:CD6281	CALL 8162
Expanding MACRO draw_shifted_sprite
index= 0004 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8133:217783	LD HL, 8377
CALL draw_sprite 
8136:CD7181	CALL 8171
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8139:0600	LD B, 00
813B:0E0F	LD C, 0F
813D:CD6281	CALL 8162
Expanding MACRO draw_shifted_sprite
index= 0005 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
8140:21D783	LD HL, 83D7
CALL draw_sprite 
8143:CD7181	CALL 8171
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8146:0600	LD B, 00
8148:0E12	LD C, 12
814A:CD6281	CALL 8162
Expanding MACRO draw_shifted_sprite
index= 0006 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
814D:213784	LD HL, 8437
CALL draw_sprite 
8150:CD7181	CALL 8171
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8153:0600	LD B, 00
8155:0E15	LD C, 15
8157:CD6281	CALL 8162
Expanding MACRO draw_shifted_sprite
index= 0007 
LD HL , SPRITE_SHIFT_0 + ( index * 0018 * 0004 ) 
815A:219784	LD HL, 8497
CALL draw_sprite 
815D:CD7181	CALL 8171
ENDM 
		ENDM
End of MACRO draw_shifted_sprite
8160:		label finish
8160:18FE	JR 8160
8162:		label calc_sprite_address
8162:79		LD A, C
8163:E607	AND 07
8165:0F		RRCA
8166:0F		RRCA
8167:0F		RRCA
8168:B0		OR B
8169:5F		LD E, A
816A:79		LD A, C
816B:E618	AND 18
816D:F640	OR 40
816F:57		LD D, A
8170:C9		RET
Defining MACRO add_e
Params: n
8171:		label draw_sprite
8171:CD7B81	CALL 817B
8174:CD7B81	CALL 817B
8177:CD7B81	CALL 817B
817A:C9		RET
817B:		label draw_8_lines
817B:011808	LD BC, 0818
817E:		label loop
817E:EDA0	LDI
8180:EDA0	LDI
8182:EDA0	LDI
8184:7E		LD A, (HL)
8185:12		LD (DE), A
8186:23		INC HL
8187:1D		DEC E
8188:1D		DEC E
8189:1D		DEC E
818A:14		INC D
818B:10F1	DJNZ 817E
818D:7B		LD A, E
818E:C620	ADD A, 20
8190:5F		LD E, A
8191:D8		RET C
8192:7A		LD A, D
8193:D608	SUB 08
8195:57		LD D, A
8196:C9		RET
8197:		label SPRITE_ADR
8197:000000FF	DEFB of 4 bytes
819B:000000FF	DEFB of 4 bytes
819F:01F010FF	DEFB of 4 bytes
81A3:033810FF	DEFB of 4 bytes
81A7:05D710FF	DEFB of 4 bytes
81AB:05CC10FF	DEFB of 4 bytes
81AF:053010FF	DEFB of 4 bytes
81B3:04C810FF	DEFB of 4 bytes
81B7:073610FF	DEFB of 4 bytes
81BB:0CFE38FF	DEFB of 4 bytes
81BF:1FF800FF	DEFB of 4 bytes
81C3:000030FF	DEFB of 4 bytes
81C7:03FFB0FF	DEFB of 4 bytes
81CB:05FEE0FF	DEFB of 4 bytes
81CF:0EFDC0FF	DEFB of 4 bytes
81D3:18FC00FF	DEFB of 4 bytes
81D7:180000FF	DEFB of 4 bytes
81DB:01F800FF	DEFB of 4 bytes
81DF:03FC00FF	DEFB of 4 bytes
81E3:01B000FF	DEFB of 4 bytes
81E7:020C00FF	DEFB of 4 bytes
81EB:070E00FF	DEFB of 4 bytes
81EF:1E0780FF	DEFB of 4 bytes
81F3:000000FF	DEFB of 4 bytes
81F7:		label SPRITE_SHIFT_0
81F7:		END 8000
Emiting TAP basic loader
Emiting TAP from 8000 to 81F6

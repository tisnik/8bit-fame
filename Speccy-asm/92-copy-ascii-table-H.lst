SCREEN_ADR	EQU 4000
SCREEN_BLOCK_SIZE EQU 0800
SECOND_SCREEN_BLOCK EQU 4800
CHAR_ADR	EQU 3C00
ENTRY_POINT	EQU 8000
Defining MACRO copy16bytes
Params: source_address, destination_address
		ORG 8000
8000:		label start
8000:CDAA81	CALL 81AA
8003:F3		DI
		REPT 8
Expanding MACRO copy16bytes
source_address= SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
8004:312041	LD SP, 4120
POP AF 
8007:F1		POP AF
POP BC 
8008:C1		POP BC
POP DE 
8009:D1		POP DE
POP HL 
800A:E1		POP HL
EXX 
800B:D9		EXX
EX AF , AF' 
800C:08		EX AF, AF'
POP AF 
800D:F1		POP AF
POP BC 
800E:C1		POP BC
POP DE 
800F:D1		POP DE
POP HL 
8010:E1		POP HL
LD SP , destination_address + 0010 
8011:311048	LD SP, 4810
PUSH HL 
8014:E5		PUSH HL
PUSH DE 
8015:D5		PUSH DE
PUSH BC 
8016:C5		PUSH BC
PUSH AF 
8017:F5		PUSH AF
EXX 
8018:D9		EXX
EX AF , AF' 
8019:08		EX AF, AF'
PUSH HL 
801A:E5		PUSH HL
PUSH DE 
801B:D5		PUSH DE
PUSH BC 
801C:C5		PUSH BC
PUSH AF 
801D:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= 0010 + SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= 0010 + SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
801E:313041	LD SP, 4130
POP AF 
8021:F1		POP AF
POP BC 
8022:C1		POP BC
POP DE 
8023:D1		POP DE
POP HL 
8024:E1		POP HL
EXX 
8025:D9		EXX
EX AF , AF' 
8026:08		EX AF, AF'
POP AF 
8027:F1		POP AF
POP BC 
8028:C1		POP BC
POP DE 
8029:D1		POP DE
POP HL 
802A:E1		POP HL
LD SP , destination_address + 0010 
802B:312048	LD SP, 4820
PUSH HL 
802E:E5		PUSH HL
PUSH DE 
802F:D5		PUSH DE
PUSH BC 
8030:C5		PUSH BC
PUSH AF 
8031:F5		PUSH AF
EXX 
8032:D9		EXX
EX AF , AF' 
8033:08		EX AF, AF'
PUSH HL 
8034:E5		PUSH HL
PUSH DE 
8035:D5		PUSH DE
PUSH BC 
8036:C5		PUSH BC
PUSH AF 
8037:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
8038:312042	LD SP, 4220
POP AF 
803B:F1		POP AF
POP BC 
803C:C1		POP BC
POP DE 
803D:D1		POP DE
POP HL 
803E:E1		POP HL
EXX 
803F:D9		EXX
EX AF , AF' 
8040:08		EX AF, AF'
POP AF 
8041:F1		POP AF
POP BC 
8042:C1		POP BC
POP DE 
8043:D1		POP DE
POP HL 
8044:E1		POP HL
LD SP , destination_address + 0010 
8045:311049	LD SP, 4910
PUSH HL 
8048:E5		PUSH HL
PUSH DE 
8049:D5		PUSH DE
PUSH BC 
804A:C5		PUSH BC
PUSH AF 
804B:F5		PUSH AF
EXX 
804C:D9		EXX
EX AF , AF' 
804D:08		EX AF, AF'
PUSH HL 
804E:E5		PUSH HL
PUSH DE 
804F:D5		PUSH DE
PUSH BC 
8050:C5		PUSH BC
PUSH AF 
8051:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= 0010 + SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= 0010 + SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
8052:313042	LD SP, 4230
POP AF 
8055:F1		POP AF
POP BC 
8056:C1		POP BC
POP DE 
8057:D1		POP DE
POP HL 
8058:E1		POP HL
EXX 
8059:D9		EXX
EX AF , AF' 
805A:08		EX AF, AF'
POP AF 
805B:F1		POP AF
POP BC 
805C:C1		POP BC
POP DE 
805D:D1		POP DE
POP HL 
805E:E1		POP HL
LD SP , destination_address + 0010 
805F:312049	LD SP, 4920
PUSH HL 
8062:E5		PUSH HL
PUSH DE 
8063:D5		PUSH DE
PUSH BC 
8064:C5		PUSH BC
PUSH AF 
8065:F5		PUSH AF
EXX 
8066:D9		EXX
EX AF , AF' 
8067:08		EX AF, AF'
PUSH HL 
8068:E5		PUSH HL
PUSH DE 
8069:D5		PUSH DE
PUSH BC 
806A:C5		PUSH BC
PUSH AF 
806B:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
806C:312043	LD SP, 4320
POP AF 
806F:F1		POP AF
POP BC 
8070:C1		POP BC
POP DE 
8071:D1		POP DE
POP HL 
8072:E1		POP HL
EXX 
8073:D9		EXX
EX AF , AF' 
8074:08		EX AF, AF'
POP AF 
8075:F1		POP AF
POP BC 
8076:C1		POP BC
POP DE 
8077:D1		POP DE
POP HL 
8078:E1		POP HL
LD SP , destination_address + 0010 
8079:31104A	LD SP, 4A10
PUSH HL 
807C:E5		PUSH HL
PUSH DE 
807D:D5		PUSH DE
PUSH BC 
807E:C5		PUSH BC
PUSH AF 
807F:F5		PUSH AF
EXX 
8080:D9		EXX
EX AF , AF' 
8081:08		EX AF, AF'
PUSH HL 
8082:E5		PUSH HL
PUSH DE 
8083:D5		PUSH DE
PUSH BC 
8084:C5		PUSH BC
PUSH AF 
8085:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= 0010 + SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= 0010 + SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
8086:313043	LD SP, 4330
POP AF 
8089:F1		POP AF
POP BC 
808A:C1		POP BC
POP DE 
808B:D1		POP DE
POP HL 
808C:E1		POP HL
EXX 
808D:D9		EXX
EX AF , AF' 
808E:08		EX AF, AF'
POP AF 
808F:F1		POP AF
POP BC 
8090:C1		POP BC
POP DE 
8091:D1		POP DE
POP HL 
8092:E1		POP HL
LD SP , destination_address + 0010 
8093:31204A	LD SP, 4A20
PUSH HL 
8096:E5		PUSH HL
PUSH DE 
8097:D5		PUSH DE
PUSH BC 
8098:C5		PUSH BC
PUSH AF 
8099:F5		PUSH AF
EXX 
809A:D9		EXX
EX AF , AF' 
809B:08		EX AF, AF'
PUSH HL 
809C:E5		PUSH HL
PUSH DE 
809D:D5		PUSH DE
PUSH BC 
809E:C5		PUSH BC
PUSH AF 
809F:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
80A0:312044	LD SP, 4420
POP AF 
80A3:F1		POP AF
POP BC 
80A4:C1		POP BC
POP DE 
80A5:D1		POP DE
POP HL 
80A6:E1		POP HL
EXX 
80A7:D9		EXX
EX AF , AF' 
80A8:08		EX AF, AF'
POP AF 
80A9:F1		POP AF
POP BC 
80AA:C1		POP BC
POP DE 
80AB:D1		POP DE
POP HL 
80AC:E1		POP HL
LD SP , destination_address + 0010 
80AD:31104B	LD SP, 4B10
PUSH HL 
80B0:E5		PUSH HL
PUSH DE 
80B1:D5		PUSH DE
PUSH BC 
80B2:C5		PUSH BC
PUSH AF 
80B3:F5		PUSH AF
EXX 
80B4:D9		EXX
EX AF , AF' 
80B5:08		EX AF, AF'
PUSH HL 
80B6:E5		PUSH HL
PUSH DE 
80B7:D5		PUSH DE
PUSH BC 
80B8:C5		PUSH BC
PUSH AF 
80B9:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= 0010 + SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= 0010 + SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
80BA:313044	LD SP, 4430
POP AF 
80BD:F1		POP AF
POP BC 
80BE:C1		POP BC
POP DE 
80BF:D1		POP DE
POP HL 
80C0:E1		POP HL
EXX 
80C1:D9		EXX
EX AF , AF' 
80C2:08		EX AF, AF'
POP AF 
80C3:F1		POP AF
POP BC 
80C4:C1		POP BC
POP DE 
80C5:D1		POP DE
POP HL 
80C6:E1		POP HL
LD SP , destination_address + 0010 
80C7:31204B	LD SP, 4B20
PUSH HL 
80CA:E5		PUSH HL
PUSH DE 
80CB:D5		PUSH DE
PUSH BC 
80CC:C5		PUSH BC
PUSH AF 
80CD:F5		PUSH AF
EXX 
80CE:D9		EXX
EX AF , AF' 
80CF:08		EX AF, AF'
PUSH HL 
80D0:E5		PUSH HL
PUSH DE 
80D1:D5		PUSH DE
PUSH BC 
80D2:C5		PUSH BC
PUSH AF 
80D3:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
80D4:312045	LD SP, 4520
POP AF 
80D7:F1		POP AF
POP BC 
80D8:C1		POP BC
POP DE 
80D9:D1		POP DE
POP HL 
80DA:E1		POP HL
EXX 
80DB:D9		EXX
EX AF , AF' 
80DC:08		EX AF, AF'
POP AF 
80DD:F1		POP AF
POP BC 
80DE:C1		POP BC
POP DE 
80DF:D1		POP DE
POP HL 
80E0:E1		POP HL
LD SP , destination_address + 0010 
80E1:31104C	LD SP, 4C10
PUSH HL 
80E4:E5		PUSH HL
PUSH DE 
80E5:D5		PUSH DE
PUSH BC 
80E6:C5		PUSH BC
PUSH AF 
80E7:F5		PUSH AF
EXX 
80E8:D9		EXX
EX AF , AF' 
80E9:08		EX AF, AF'
PUSH HL 
80EA:E5		PUSH HL
PUSH DE 
80EB:D5		PUSH DE
PUSH BC 
80EC:C5		PUSH BC
PUSH AF 
80ED:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= 0010 + SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= 0010 + SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
80EE:313045	LD SP, 4530
POP AF 
80F1:F1		POP AF
POP BC 
80F2:C1		POP BC
POP DE 
80F3:D1		POP DE
POP HL 
80F4:E1		POP HL
EXX 
80F5:D9		EXX
EX AF , AF' 
80F6:08		EX AF, AF'
POP AF 
80F7:F1		POP AF
POP BC 
80F8:C1		POP BC
POP DE 
80F9:D1		POP DE
POP HL 
80FA:E1		POP HL
LD SP , destination_address + 0010 
80FB:31204C	LD SP, 4C20
PUSH HL 
80FE:E5		PUSH HL
PUSH DE 
80FF:D5		PUSH DE
PUSH BC 
8100:C5		PUSH BC
PUSH AF 
8101:F5		PUSH AF
EXX 
8102:D9		EXX
EX AF , AF' 
8103:08		EX AF, AF'
PUSH HL 
8104:E5		PUSH HL
PUSH DE 
8105:D5		PUSH DE
PUSH BC 
8106:C5		PUSH BC
PUSH AF 
8107:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
8108:312046	LD SP, 4620
POP AF 
810B:F1		POP AF
POP BC 
810C:C1		POP BC
POP DE 
810D:D1		POP DE
POP HL 
810E:E1		POP HL
EXX 
810F:D9		EXX
EX AF , AF' 
8110:08		EX AF, AF'
POP AF 
8111:F1		POP AF
POP BC 
8112:C1		POP BC
POP DE 
8113:D1		POP DE
POP HL 
8114:E1		POP HL
LD SP , destination_address + 0010 
8115:31104D	LD SP, 4D10
PUSH HL 
8118:E5		PUSH HL
PUSH DE 
8119:D5		PUSH DE
PUSH BC 
811A:C5		PUSH BC
PUSH AF 
811B:F5		PUSH AF
EXX 
811C:D9		EXX
EX AF , AF' 
811D:08		EX AF, AF'
PUSH HL 
811E:E5		PUSH HL
PUSH DE 
811F:D5		PUSH DE
PUSH BC 
8120:C5		PUSH BC
PUSH AF 
8121:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= 0010 + SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= 0010 + SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
8122:313046	LD SP, 4630
POP AF 
8125:F1		POP AF
POP BC 
8126:C1		POP BC
POP DE 
8127:D1		POP DE
POP HL 
8128:E1		POP HL
EXX 
8129:D9		EXX
EX AF , AF' 
812A:08		EX AF, AF'
POP AF 
812B:F1		POP AF
POP BC 
812C:C1		POP BC
POP DE 
812D:D1		POP DE
POP HL 
812E:E1		POP HL
LD SP , destination_address + 0010 
812F:31204D	LD SP, 4D20
PUSH HL 
8132:E5		PUSH HL
PUSH DE 
8133:D5		PUSH DE
PUSH BC 
8134:C5		PUSH BC
PUSH AF 
8135:F5		PUSH AF
EXX 
8136:D9		EXX
EX AF , AF' 
8137:08		EX AF, AF'
PUSH HL 
8138:E5		PUSH HL
PUSH DE 
8139:D5		PUSH DE
PUSH BC 
813A:C5		PUSH BC
PUSH AF 
813B:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
813C:312047	LD SP, 4720
POP AF 
813F:F1		POP AF
POP BC 
8140:C1		POP BC
POP DE 
8141:D1		POP DE
POP HL 
8142:E1		POP HL
EXX 
8143:D9		EXX
EX AF , AF' 
8144:08		EX AF, AF'
POP AF 
8145:F1		POP AF
POP BC 
8146:C1		POP BC
POP DE 
8147:D1		POP DE
POP HL 
8148:E1		POP HL
LD SP , destination_address + 0010 
8149:31104E	LD SP, 4E10
PUSH HL 
814C:E5		PUSH HL
PUSH DE 
814D:D5		PUSH DE
PUSH BC 
814E:C5		PUSH BC
PUSH AF 
814F:F5		PUSH AF
EXX 
8150:D9		EXX
EX AF , AF' 
8151:08		EX AF, AF'
PUSH HL 
8152:E5		PUSH HL
PUSH DE 
8153:D5		PUSH DE
PUSH BC 
8154:C5		PUSH BC
PUSH AF 
8155:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= 0010 + SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= 0010 + SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
8156:313047	LD SP, 4730
POP AF 
8159:F1		POP AF
POP BC 
815A:C1		POP BC
POP DE 
815B:D1		POP DE
POP HL 
815C:E1		POP HL
EXX 
815D:D9		EXX
EX AF , AF' 
815E:08		EX AF, AF'
POP AF 
815F:F1		POP AF
POP BC 
8160:C1		POP BC
POP DE 
8161:D1		POP DE
POP HL 
8162:E1		POP HL
LD SP , destination_address + 0010 
8163:31204E	LD SP, 4E20
PUSH HL 
8166:E5		PUSH HL
PUSH DE 
8167:D5		PUSH DE
PUSH BC 
8168:C5		PUSH BC
PUSH AF 
8169:F5		PUSH AF
EXX 
816A:D9		EXX
EX AF , AF' 
816B:08		EX AF, AF'
PUSH HL 
816C:E5		PUSH HL
PUSH DE 
816D:D5		PUSH DE
PUSH BC 
816E:C5		PUSH BC
PUSH AF 
816F:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
8170:312048	LD SP, 4820
POP AF 
8173:F1		POP AF
POP BC 
8174:C1		POP BC
POP DE 
8175:D1		POP DE
POP HL 
8176:E1		POP HL
EXX 
8177:D9		EXX
EX AF , AF' 
8178:08		EX AF, AF'
POP AF 
8179:F1		POP AF
POP BC 
817A:C1		POP BC
POP DE 
817B:D1		POP DE
POP HL 
817C:E1		POP HL
LD SP , destination_address + 0010 
817D:31104F	LD SP, 4F10
PUSH HL 
8180:E5		PUSH HL
PUSH DE 
8181:D5		PUSH DE
PUSH BC 
8182:C5		PUSH BC
PUSH AF 
8183:F5		PUSH AF
EXX 
8184:D9		EXX
EX AF , AF' 
8185:08		EX AF, AF'
PUSH HL 
8186:E5		PUSH HL
PUSH DE 
8187:D5		PUSH DE
PUSH BC 
8188:C5		PUSH BC
PUSH AF 
8189:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
Expanding MACRO copy16bytes
source_address= 0010 + SCREEN_ADR + 0020 * ( cnt * 0008 + 0009 ) 
destination_address= 0010 + SECOND_SCREEN_BLOCK + ( 0020 * 0008 * cnt ) 
LD SP , source_address 
818A:313048	LD SP, 4830
POP AF 
818D:F1		POP AF
POP BC 
818E:C1		POP BC
POP DE 
818F:D1		POP DE
POP HL 
8190:E1		POP HL
EXX 
8191:D9		EXX
EX AF , AF' 
8192:08		EX AF, AF'
POP AF 
8193:F1		POP AF
POP BC 
8194:C1		POP BC
POP DE 
8195:D1		POP DE
POP HL 
8196:E1		POP HL
LD SP , destination_address + 0010 
8197:31204F	LD SP, 4F20
PUSH HL 
819A:E5		PUSH HL
PUSH DE 
819B:D5		PUSH DE
PUSH BC 
819C:C5		PUSH BC
PUSH AF 
819D:F5		PUSH AF
EXX 
819E:D9		EXX
EX AF , AF' 
819F:08		EX AF, AF'
PUSH HL 
81A0:E5		PUSH HL
PUSH DE 
81A1:D5		PUSH DE
PUSH BC 
81A2:C5		PUSH BC
PUSH AF 
81A3:F5		PUSH AF
ENDM 
		ENDM
End of MACRO copy16bytes
		ENDM
81A4:310090	LD SP, 9000
81A7:FB		EI
81A8:		label finito
81A8:18FE	JR 81A8
81AA:		label fill_in_screen
81AA:110040	LD DE, 4000
81AD:CDB181	CALL 81B1
81B0:C9		RET
81B1:		label draw_ascii_table
81B1:3E20	LD A, 20
81B3:		label next_char
81B3:F5		PUSH AF
81B4:CDC381	CALL 81C3
81B7:3E20	LD A, 20
81B9:CDC381	CALL 81C3
81BC:F1		POP AF
81BD:3C		INC A
81BE:FE80	CP 80
81C0:20F1	JR NZ, 81B3
81C2:C9		RET
81C3:		label draw_char
81C3:01003C	LD BC, 3C00
81C6:61		LD H, C
81C7:6F		LD L, A
81C8:29		ADD HL, HL
81C9:29		ADD HL, HL
81CA:29		ADD HL, HL
81CB:09		ADD HL, BC
81CC:0608	LD B, 08
81CE:4A		LD C, D
81CF:		label loop
81CF:7E		LD A, (HL)
81D0:12		LD (DE), A
81D1:2C		INC L
81D2:14		INC D
81D3:10FA	DJNZ 81CF
81D5:1C		INC E
81D6:C8		RET Z
81D7:51		LD D, C
81D8:C9		RET
81D9:		END 8000
Emiting TAP basic loader
Emiting TAP from 8000 to 81D8

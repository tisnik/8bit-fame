10 DIM FILENAME$(20)
20 FILENAME$="H:TEST.BMP"
30 GRAPHICS 8+16
40 COLOR 1
50 PLOT 0,0
60 DRAWTO 319,191
70 CIRCLE 20,20,10
80 EXEC WRITE_BMP
999 STOP 
10000 ------------------------------
10010 REM STORE VIDEO RAM
10020 REM IN GRAPHICS 8 INTO
10030 REM BMP FILE
10040 REM FILENAME IS TO BE PROVIDED
10050 REM VIA FILENAME$ VARIABLE
10060 ------------------------------
10070 PROC WRITE_BMP
10075   OPEN #1,8,0,FILENAME$
10080   RESTORE 10502
10085   DIM B$(3)
10090   FOR I=0 TO 31
10095     READ B$
10100     B=DEC(B$(2,3))
10110     PUT #1,B
10120   NEXT I
10130   SCREEN_BEGIN=DPEEK(88)
10135   SCREEN_END=SCREEN_BEGIN+7680-1
10140   FOR I=SCREEN_BEGIN TO SCREEN_END
10145     PUT #1,PEEK(I)
10150   NEXT I
10160   CLOSE #1
10200 ENDPROC 
10500 REM BMP FILE HEADER
10501 REM MAGIC NUMBER "BM"
10502 DATA $42,$4D
10503 REM FILE SIZE=7712 BYTES
10504 DATA $20,$1E,$00,$00
10505 REM RESERVED
10506 DATA $00,$00,$00,$00
10507 REM PIXEL ARRAY OFFSET=32
10508 DATA $20,$00,$00,$00
10509 REM BITMAP HEADER SIZE=12 BYTES
10510 DATA $0C,$00,$00,$00
10511 REM BITMAP WIDTH IN PIXELS
10512 DATA $40,$01:REM 320 PIXELS
10513 REM BITMAP HEIGHT IN PIXELS
10514 DATA $C0,$00:REM 192 PIXELS
10515 REM NUMBER OF COLOR PLANES
10516 DATA $01,$00:REM 1 CLR.PLANE
10517 REM BITS PER PIXEL
10518 DATA $01,$00:REM 1 BPP
10519 REM FIRST COLOR IN PALETTE
10520 DATA $00,$00,$00
10521 REM SECOND COLOR IN PALETTE
10522 DATA $FF,$FF,$FF
10523 REM END OF BMP HEADER
